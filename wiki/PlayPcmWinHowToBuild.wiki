#summary How to build PlayPcmWin
#labels Featured

= How to build !PlayPcmWin =

== Prerequisites ==

 * Windows 7 x64
 * Visual Studio 2010 Professional

== 1. Download !PlayPcmWin sourcecode =

Checkout !PlayPcmWin sourcecode onto *C:\work\BpsConvWin2*. For example if you use TortoiseSVN, open windows explorer, create *C:\work\BpsConvWin2* folder, right-click the BpsConvWin2 folder and `[`SVN Checkout...`]` to open Checkout dialog. Enter the following URL on `[`URL of repository`]`

http://bitspersampleconv2.googlecode.com/svn/trunk

== 2. Create LocBaml_x64.exe and LocBaml_x86.exe =

Download "LocBaml Tool Sample" from the following page:
http://msdn.microsoft.com/en-us/library/ms746621.aspx

Run Visual Studio 2010 and Load locbaml_sdk.sln

Open `[`Project`]``[`Configuration manager`]`, select x64 platform and rebuild the solution. copy resulted locbaml.exe to C:\work\BpsConvWin2\!PlayPcmWin\LocBaml_x64.exe

Open `[`Project`]``[`Configuration manager`]`, select x86 platform and rebuild the solution. copy resulted locbaml.exe to C:\work\BpsConvWin2\!PlayPcmWin\LocBaml_x86.exe. although this LocBaml_x86.exe may not work correctly. I forgot the detail, but if the LocBaml_x86.exe doesn't work, 32bit version of LocBaml must be built using Windows 32-bit version. I don't know why but it worked for me.

== 3. Prepare libFLAC_static.lib and libogg_static.lib ==

Download libogg-x.y.z.tar.gz source code from the following site:
http://xiph.org/downloads/

Extract onto C:\work folder. Open C:\work\libogg-x.y.z\win32\VS2010\libogg_static.sln and release-build libogg_static.lib

Download flac-s.t.u.tar.gz source code from the following site:
http://flac.sourceforge.net/download.html

Extract it onto C:\work folder. Open C:\work\flac-s.t.u\FLAC.sln. select release build. right-click libFLAC_static on the solution explorer and `[`Property`]` to open libFLAC_static property page. on the page, Select `[`VC++ directories`]``[`include directories`]` and append *C:\work\libogg-x.y.z\include;*

Right-click  `[`libFLAC_static`] and select `[Build`] to build libFLAC_static.lib

In order to build FLAC, I suppose, the Netwide assembler is needed additionally. It can be downloaded from the following site:
http://sourceforge.net/projects/nasm/

Only Win32 build of libFLAC and libogg are needed because !PlayPcmWin creates dedicated FLAC decode process that runs on 32bit mode.

== 4. Download and install DirectX SDK ==

Download and install DirectX SDK.

Latest DirectSDK is available here: 
http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=6812

== 5. Build !PlayPcmWin ==

Open C:\work\BpsConvWin2\!PlayPcmWin\!PlayPcmWin.sln

Select build target (Release x64 or Release x86. Other platform such as AnyCPU doesn't work). Right-click !PlayPcmWin project on the solution explorer window and flag it as startup project and build.

I suppose the folder path to libFLAC_static.lib and libogg_static.lib must be specified somewhere to build !PlayPcmWin successfully. Please play it by ear if any problem arises.